<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Consulter Etudiant</title>
 <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous"> 
<!-- Add Font Awesome for icons -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>
  <br />  <br />
<div class='container'>
<br />
    <table class='table table-striped table-bordered'>
          <thead >
            <th>CIN</th>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Date Naissance</th>
            <th>Téléphone</th>
            <th>Email</th>
            <th style="width:13%">Actions</th>
          </thead>
   
     <!--  // Verifier si la table est vide ou non  -->      
            <tbody th:if="${#lists.isEmpty(myListeEtudiants)}">
                <tr>
                    <td colspan="7" class="text-center">
                        <b style="color:#008080;">Aucun Etudiant disponible</b>
                    </td>
                </tr>
            </tbody>
         
      <tbody> 
    <!--   <tbody th:if="${not #lists.isEmpty(myListeEtudiants)}">   -->
         <tr th:each="etudiant : ${myListeEtudiants}">
       	     <td th:text="${etudiant.cin}" ></td>
             <td th:text="${etudiant.nom}" ></td>
             <td th:text="${etudiant.prenom}" ></td>
             <td th:text="${etudiant.dateNaissance}" ></td>
             <td th:text="${etudiant.telephone}" ></td>
             <td th:text="${etudiant.email}" ></td>
                <td> 
                  <a th:href="@{/modifier-etudiant/{cin}(cin=${etudiant.cin})}" style="color: green; cursor: pointer; margin-left: 25px; font-size: 22px;"
                      onclick="return confirm('Voulez-vous vraiment modifier cet étudiant ?')"
                      title="Edit"> <i class="fas fa-edit"></i> 
                   </a>
		          <form th:action="@{'/supprimer-etudiant/' + ${etudiant.cin}}" method="post" th:id="'form_' + ${etudiant.cin}" style="display: inline;">
					    <button type="button" th:attr="data-etudiant-id=${etudiant.cin}" onclick="confirmDelete(this)" style="color: red; cursor: pointer; margin-left: 22px; font-size: 22px; border: none; display: inline;" title="Delete">
						    <i class="fas fa-trash-alt"></i>
						</button>					    
				  </form>
                </td>
                
            </tr>  

            </tbody>
            </table> 
            
              <div class="form-group row">
                  <div class="col-sm-5 offset-sm-10" >
                    <div onClick="Retour();">
                      <button style="width:30%; font-size:110%; background-color:#B0C4DE;" class="btn btn-info">Retour</button>
                    </div>                          
                  </div>
              </div>
                  
           
      </div>
      

 <script>
     function Retour() {
        location.replace("/interface-principale"); 
     }
     
     function confirmDelete(button) {
    	    var etudiantId = button.getAttribute("data-etudiant-id");
    	       // alert(etudiantId);
    	    if (confirm("Voulez-vous vraiment supprimer cet étudiant ?")) {
    	        // Si l'utilisateur confirme la suppression, soumettez le formulaire.
    	        document.getElementById("form_" + etudiantId).submit();
    	    }
    }



 </script>


</body>

</html>